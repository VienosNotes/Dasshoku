(function(e){function t(t){for(var s,r,o=t[0],h=t[1],c=t[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e[s]=h[s]);l&&l(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,o=1;o<i.length;o++){var h=i[o];0!==a[h]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},a={app:0},n=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=h;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"38b6":function(e,t,i){"use strict";var s=i("3a79"),a=i.n(s);a.a},"3a79":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("link",{attrs:{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}}),e._m(0),i("Main"),i("div",{attrs:{id:"caption"}},[e._v("このアプリはブラウザの機能のみで動作するため、画像がサーバにアップロードされることはありません。")]),e._m(1)],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("h1",[i("span",{attrs:{id:"logo-highlight"}},[e._v("D")]),e._v("asshoku")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",{attrs:{id:"copyright"}},[e._v("Dasshoku v1.0, Created by "),i("a",{attrs:{href:"https://twitter.com/VienosNotes"}},[e._v("@VienosNotes")]),e._v(", "),i("a",{attrs:{href:"https://github.com/VienosNotes/Dasshoku"}},[e._v("Documents in Github")])])}],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-frame"},[i("div",{attrs:{id:"images-container"}},[i("div",{staticClass:"image-container",attrs:{id:"orig-image-container"}},[i("canvas",{attrs:{id:"orig-image-canvas",width:"600",height:"400"},on:{click:e.chooseColor}}),i("div",{attrs:{id:"click-caption"}},[e._v("Click to pick the key color")])]),e._m(0),e._m(1)]),i("div",{attrs:{id:"buttons-container"}},[i("label",{directives:[{name:"show",rawName:"v-show",value:!e.isProcessing,expression:"!isProcessing"}],staticClass:"label-button",attrs:{id:"open-button"}},[i("span",{staticClass:"material-icons button-icon"},[e._v(" add_photo_alternate ")]),i("span",[e._v("Open")]),i("input",{attrs:{type:"file",id:"orig-image-selector",name:"Choose",accept:"image/*"},on:{input:e.initImages}})]),i("label",{directives:[{name:"show",rawName:"v-show",value:!e.isProcessing,expression:"!isProcessing"}],staticClass:"label-button",attrs:{id:"save-button"},on:{click:e.showSizeChooser}},[i("span",{staticClass:"material-icons button-icon"},[e._v(" save_alt ")]),i("span",[e._v("Save")])]),i("label",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],attrs:{id:"proc-label"}},[i("span",[e._v("Dasshoku Processing...")])])]),i("div",{attrs:{id:"palette-container"}},[i("div",{staticClass:"palette"},[i("div",{staticClass:"controller",attrs:{id:"color-chooser"}},[e._v(" Chosen Color: "),i("span",{style:{background:e.selectedColor},attrs:{id:"chosen-color-sample"}}),i("span",[e._v(e._s(e.selectedColor))])]),i("div",{staticClass:"controller"},[i("div",[e._v("Threshold: "+e._s(e.threshold))]),i("vue-slider",{style:{visibility:e.isProcessing?"hidden":"visible"},attrs:{data:e.threshold_range,lazy:!0},model:{value:e.threshold,callback:function(t){e.threshold=t},expression:"threshold"}})],1),i("div",{staticClass:"controller"},[i("div",[e._v("Hue Weight: "+e._s(e.h_weight))]),i("vue-slider",{style:{visibility:e.isProcessing?"hidden":"visible"},attrs:{min:0,max:10,interval:.1,lazy:!0},model:{value:e.h_weight,callback:function(t){e.h_weight=t},expression:"h_weight"}})],1),i("div",{staticClass:"controller"},[i("div",[e._v("Saturation Weight: "+e._s(e.s_weight))]),i("vue-slider",{style:{visibility:e.isProcessing?"hidden":"visible"},attrs:{min:0,max:10,interval:.1,lazy:!0},model:{value:e.s_weight,callback:function(t){e.s_weight=t},expression:"s_weight"}})],1),i("div",{staticClass:"controller"},[i("div",[e._v("Brightness Weight: "+e._s(e.v_weight))]),i("vue-slider",{style:{visibility:e.isProcessing?"hidden":"visible"},attrs:{min:0,max:10,interval:.1,lazy:!0},model:{value:e.v_weight,callback:function(t){e.v_weight=t},expression:"v_weight"}})],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isSizeChooserVisible,expression:"isSizeChooserVisible"}],attrs:{id:"size-chooser"}},[i("div",{attrs:{id:"size-chooser-caption"}},[e._v("Choose output size")]),i("div",{staticClass:"size-candidate",on:{click:function(t){return e.save(e.origSize)}}},[i("span",{staticClass:"size-name"},[e._v("Original")]),i("span",{staticClass:"size-caption"},[e._v(e._s(e.origSize[0])+"x"+e._s(e.origSize[1])+", "+e._s(e.speed(e.origSize)))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isLargeVisible,expression:"isLargeVisible"}],staticClass:"size-candidate",on:{click:function(t){return e.save(e.largeSize)}}},[i("span",{staticClass:"size-name"},[e._v("Large")]),i("span",{staticClass:"size-caption"},[e._v(e._s(e.largeSize[0])+"x"+e._s(e.largeSize[1])+", "+e._s(e.speed(e.largeSize)))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMediumVisible,expression:"isMediumVisible"}],staticClass:"size-candidate",on:{click:function(t){return e.save(e.mediumSize)}}},[i("span",{staticClass:"size-name"},[e._v("Medium")]),i("span",{staticClass:"size-caption"},[e._v(e._s(e.mediumSize[0])+"x"+e._s(e.mediumSize[1])+", "+e._s(e.speed(e.mediumSize)))])]),i("div",{attrs:{id:"cancel-button"},on:{click:e.cancelSave}},[e._v("Cancel")])])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"triangle"}},[s("img",{attrs:{src:i("e146"),width:"110",alt:"gradient triangle",id:"triangle-img"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-container",attrs:{id:"dasshoku-image-container"}},[i("canvas",{attrs:{id:"dasshoku-image-canvas",width:"600",height:"400"}})])}],h=(i("99af"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("2909")),c=i("724e"),l=i.n(c),d=i("bb15"),u=i.n(d),g={decolorizeWithoutKeyColor:function(e,t){var i=this;this.apply(e,(function(e,s){var a=u.a.hex.hsv(t.key),n=u.a.rgb.hsv(e[s],e[s+1],e[s+2]),r=Math.sqrt(t.h_weight*Math.pow(i.getHueDistance(a[0],n[0]),2)+t.s_weight*Math.pow(a[1]-n[1],2)+t.v_weight*Math.pow(a[2]-n[2],2));r>t.threshold&&i.decolorizePixel(e,s)}))},getHueDistance:function(e,t){var i=Math.abs(e-t);return i>180&&(i=360-i),i*(256/180)},apply:function(e,t){for(var i=e.data.length/4,s=e.data,a=0;a<4*i-1;a+=4)t(s,a)},decolorizePixel:function(e,t){var i=u.a.rgb.hsl.raw(e[t],e[t+1],e[t+2]),s=u.a.hsl.rgb(i[0],0,i[2]);e[t]=s[0],e[t+1]=s[1],e[t+2]=s[2]},rgbToHex:function(e){return u.a.rgb.hex(e)}},v=i("4971"),m=i.n(v),f=1500,p=3/4,w=200,C=1920,A=800,b={name:"Main",components:{VueSlider:m.a},props:{msg:String},data:function(){return{selectedColor:"#DB7B97",threshold:149,h_weight:2.6,s_weight:8.2,v_weight:6.3,latestUrl:String,threshold_range:[],image:Image,isProcessing:!1,isSizeChooserVisible:!1}},watch:{selectedColor:function(){this.execWithKey(this.origCanvas,this.dasshokuCanvas)},threshold:function(){this.execWithKey(this.origCanvas,this.dasshokuCanvas)},h_weight:function(){this.execWithKey(this.origCanvas,this.dasshokuCanvas)},s_weight:function(){this.execWithKey(this.origCanvas,this.dasshokuCanvas)},v_weight:function(){this.execWithKey(this.origCanvas,this.dasshokuCanvas)}},mounted:function(){var e=this,t=Object(h["a"])(Array(w+1).keys());t.reverse(),this.threshold_range=t;var i=window.visualViewport.width;i<=f&&this.applySpStyle(i);var s=this.origCtx,a=new Image;a.addEventListener("load",(function(){e.image=a,e.drawImage(s,a,e.origCanvas.width,e.origCanvas.height),e.execWithKey(e.origCanvas,e.dasshokuCanvas)})),a.src=l.a},methods:{initImages:function(e){var t=this,i=e.currentTarget.files[0],s=new FileReader;s.addEventListener("load",(function(e){var i=e.target.result,s=new Image;s.addEventListener("load",(function(){t.image=s,t.drawImage(t.origCtx,s,t.origCanvas.width,t.origCanvas.height),t.execWithKey(t.origCanvas,t.dasshokuCanvas)})),s.src=i})),s.readAsDataURL(i)},drawImage:function(e,t,i,s){e.clearRect(0,0,i,s);var a=t.width/t.height,n=i/s;a>n?e.drawImage(t,0,(s-i/a)/2,i,i/a):e.drawImage(t,(i-s*a)/2,0,s*a,s)},execWithKey:function(e,t){var i=e.getContext("2d").getImageData(0,0,e.width,e.height);g.decolorizeWithoutKeyColor(i,this.currentSetting),t.getContext("2d").putImageData(i,0,0)},chooseColor:function(e){var t=this.origCtx.getImageData(e.offsetX,e.offsetY,1,1),i=t.data;0!==i[3]&&(this.selectedColor="#".concat(g.rgbToHex(i)))},applySpStyle:function(e){var t=Math.min(.7*e,600);this.origCanvas.width=t,this.origCanvas.height=Math.floor(t*p),this.dasshokuCanvas.width=t,this.dasshokuCanvas.height=Math.floor(t*p)},save:function(e){var t=this;this.isSizeChooserVisible=!1,setTimeout((function(){var i=document.createElement("canvas");i.width=e[0],i.height=e[1];var s=i.getContext("2d");t.drawImage(s,t.image,i.width,i.height),t.execWithKey(i,i),i.toBlob((function(e){var i=URL.createObjectURL(e),s=document.createElement("a");s.href=i;var a=new Date(Date.now());s.download="dasshoku_".concat(a.getFullYear()).concat(a.getMonth()).concat(a.getDate(),"_").concat(a.getHours()).concat(a.getMinutes()).concat(a.getSeconds(),".png"),s.click(),t.applyProcessingStyle(!1),URL.revokeObjectURL(i)}))}),500)},applyProcessingStyle:function(e){this.isProcessing=e},showSizeChooser:function(){this.isSizeChooserVisible=!0,this.isProcessing=!0},cancelSave:function(){this.isSizeChooserVisible=!1,this.isProcessing=!1},resizeWithLongSide:function(e,t){return t>1?[e,Math.floor(e/t)]:[Math.floor(e*t),e]},speed:function(e){var t=e[0]*e[1];return t<A*A*.8?"fast":t<C*C*.8?"slow":"very slow"}},computed:{origCtx:function(){var e=this.origCanvas;return e.getContext("2d")},origCanvas:function(){return document.getElementById("orig-image-canvas")},dasshokuCanvas:function(){return document.getElementById("dasshoku-image-canvas")},currentSetting:function(){return{key:this.selectedColor,h_weight:this.h_weight,s_weight:this.s_weight,v_weight:this.v_weight,threshold:this.threshold}},origSize:function(){return this.image?[this.image.width,this.image.height]:[0,0]},largeSize:function(){if(!this.image)return[0,0];var e=this.image.width/this.image.height;return this.resizeWithLongSide(C,e)},mediumSize:function(){if(!this.image)return[0,0];var e=this.image.width/this.image.height;return this.resizeWithLongSide(A,e)},isLargeVisible:function(){return!!this.image&&(this.image.width>C||this.image.height>C)},isMediumVisible:function(){return!!this.image&&(this.image.width>A||this.image.height>A)}}},y=b,x=(i("38b6"),i("2877")),S=Object(x["a"])(y,r,o,!1,null,null,null),_=S.exports,k={name:"App",components:{Main:_}},z=k,L=(i("7faf"),Object(x["a"])(z,a,n,!1,null,null,null)),P=L.exports;s["default"].config.productionTip=!1,new s["default"]({render:function(e){return e(P)}}).$mount("#app")},"724e":function(e,t,i){e.exports=i.p+"img/test.1e1d555d.jpg"},"7faf":function(e,t,i){"use strict";var s=i("b8ff"),a=i.n(s);a.a},b8ff:function(e,t,i){},e146:function(e,t){e.exports="data:image/png;base64,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"}});
//# sourceMappingURL=app.cfbb553c.js.map