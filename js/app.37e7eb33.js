(function(t){function e(e){for(var i,r,o=e[0],h=e[1],l=e[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var h=a[o];0!==n[h]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=h;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"38b6":function(t,e,a){"use strict";var i=a("3a79"),n=a.n(i);n.a},"3a79":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("link",{attrs:{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}}),t._m(0),a("Main"),a("div",{attrs:{id:"caption"}},[t._v("このアプリはブラウザの機能のみで動作するため、画像がサーバにアップロードされることはありません。")]),t._m(1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("span",{attrs:{id:"logo-highlight"}},[t._v("D")]),t._v("asshoku")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{attrs:{id:"copyright"}},[t._v("Dasshoku v0.1, Created by "),a("a",{attrs:{href:"https://twitter.com/VienosNotes"}},[t._v("@VienosNotes")]),t._v(", "),a("a",{attrs:{href:"https://github.com/VienosNotes/Dasshoku"}},[t._v("Github")])])}],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-frame"},[a("div",{attrs:{id:"images-container"}},[a("div",{staticClass:"image-container",attrs:{id:"orig-image-container"}},[a("canvas",{attrs:{id:"orig-image-canvas",width:"600",height:"400"},on:{click:t.chooseColor}}),a("div",{attrs:{id:"click-caption"}},[t._v("Click to pick the key color")])]),t._m(0),t._m(1)]),a("div",{attrs:{id:"buttons-container"}},[a("label",{staticClass:"label-button",attrs:{id:"open-button"}},[a("span",{staticClass:"material-icons button-icon"},[t._v(" add_photo_alternate ")]),a("span",[t._v("Open")]),a("input",{attrs:{type:"file",id:"orig-image-selector",name:"Choose",accept:"image/*"},on:{input:t.initImages}})]),a("label",{staticClass:"label-button",attrs:{id:"save-button"},on:{click:t.save}},[a("span",{staticClass:"material-icons button-icon"},[t._v(" save_alt ")]),a("span",[t._v("Save")])])]),a("div",{attrs:{id:"palette-container"}},[a("div",{staticClass:"palette"},[a("div",{staticClass:"controller",attrs:{id:"color-chooser"}},[t._v(" Chosen Color: "),a("span",{style:{background:t.selectedColor},attrs:{id:"chosen-color-sample"}}),a("span",[t._v(t._s(t.selectedColor))])]),a("div",{staticClass:"controller"},[a("div",[t._v("Threshold: "+t._s(t.threshold))]),a("vue-slider",{attrs:{data:t.threshold_range,lazy:!0},model:{value:t.threshold,callback:function(e){t.threshold=e},expression:"threshold"}})],1),a("div",{staticClass:"controller"},[a("div",[t._v("Hue Weight: "+t._s(t.h_weight))]),a("vue-slider",{attrs:{min:0,max:10,interval:.1,lazy:!0},model:{value:t.h_weight,callback:function(e){t.h_weight=e},expression:"h_weight"}})],1),a("div",{staticClass:"controller"},[a("div",[t._v("Saturation Weight: "+t._s(t.s_weight))]),a("vue-slider",{attrs:{min:0,max:10,interval:.1,lazy:!0},model:{value:t.s_weight,callback:function(e){t.s_weight=e},expression:"s_weight"}})],1),a("div",{staticClass:"controller"},[a("div",[t._v("Brightness Weight: "+t._s(t.v_weight))]),a("vue-slider",{attrs:{min:0,max:10,interval:.1,lazy:!0},model:{value:t.v_weight,callback:function(e){t.v_weight=e},expression:"v_weight"}})],1)])])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"triangle"}},[i("img",{attrs:{src:a("e146"),width:"110",alt:"gradient triangle",id:"triangle-img"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-container",attrs:{id:"dasshoku-image-container"}},[a("canvas",{attrs:{id:"dasshoku-image-canvas",width:"600",height:"400"}})])}],h=(a("99af"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("2909")),l=a("724e"),c=a.n(l),u=a("bb15"),d=a.n(u),g={decolorizeWithoutKeyColor:function(t,e){var a=this;this.apply(t,(function(t,i){var n=d.a.hex.hsv(e.key),s=d.a.rgb.hsv(t[i],t[i+1],t[i+2]),r=Math.sqrt(e.h_weight*Math.pow(a.getHueDistance(n[0],s[0]),2)+e.s_weight*Math.pow(n[1]-s[1],2)+e.v_weight*Math.pow(n[2]-s[2],2));r>e.threshold&&a.decolorizePixel(t,i)}))},getHueDistance:function(t,e){var a=Math.abs(t-e);return a>180&&(a=360-a),a*(256/180)},apply:function(t,e){for(var a=t.data.length/4,i=t.data,n=0;n<4*a-1;n+=4)e(i,n)},decolorizePixel:function(t,e){var a=d.a.rgb.hsl.raw(t[e],t[e+1],t[e+2]),i=d.a.hsl.rgb(a[0],0,a[2]);t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2]},rgbToHex:function(t){return d.a.rgb.hex(t)}},v=a("4971"),f=a.n(v),p=1500,m=3/4,w=200,A={name:"Main",components:{VueSlider:f.a},props:{msg:String},data:function(){return{selectedColor:String,threshold:Number,h_weight:Number,s_weight:Number,v_weight:Number,latestUrl:String,threshold_range:[]}},watch:{selectedColor:function(){this.execWithKey()},threshold:function(){this.execWithKey()},h_weight:function(){this.execWithKey()},s_weight:function(){this.execWithKey()},v_weight:function(){this.execWithKey()}},mounted:function(){var t=this;this.selectedColor="#DB7B97",this.threshold=111,this.h_weight=3.7,this.s_weight=2.6,this.v_weight=5.5;var e=Object(h["a"])(Array(w+1).keys());e.reverse(),this.threshold_range=e;var a=window.visualViewport.width;console.log(window.visualViewport),a<=p&&this.applySpStyle(a);var i=this.origCtx,n=new Image;n.addEventListener("load",(function(){t.drawImage(i,n,t.origCanvas.width,t.origCanvas.height),t.execWithKey()})),n.src=c.a},methods:{initImages:function(t){var e=this,a=t.currentTarget.files[0],i=new FileReader;i.addEventListener("load",(function(t){var a=t.target.result,i=new Image;i.addEventListener("load",(function(){e.drawImage(e.origCtx,i,e.origCanvas.width,e.origCanvas.height),e.execWithKey()})),i.src=a})),i.readAsDataURL(a)},drawImage:function(t,e,a,i){t.clearRect(0,0,a,i);var n=e.width/e.height,s=a/i;n>s?t.drawImage(e,0,(i-a/n)/2,a,a/n):t.drawImage(e,(a-i*n)/2,0,i*n,i)},execWithKey:function(){var t=this.origCtx.getImageData(0,0,this.origCanvas.width,this.origCanvas.height),e={key:this.selectedColor,h_weight:this.h_weight,s_weight:this.s_weight,v_weight:this.v_weight,threshold:this.threshold};g.decolorizeWithoutKeyColor(t,e),this.dasshokuCtx.putImageData(t,0,0)},chooseColor:function(t){var e=this.origCtx.getImageData(t.offsetX,t.offsetY,1,1),a=e.data;this.selectedColor="#".concat(g.rgbToHex(a)),255!==a[3]&&this.execWithKey()},applySpStyle:function(t){var e=Math.min(.7*t,600);console.log(t),console.log(e),this.origCanvas.width=e,this.origCanvas.height=Math.floor(e*m),this.dasshokuCanvas.width=e,this.dasshokuCanvas.height=Math.floor(e*m)},save:function(){URL.revokeObjectURL(this.latestUrl),this.dasshokuCanvas.toBlob((function(t){var e=URL.createObjectURL(t),a=document.createElement("a");a.href=e;var i=new Date(Date.now());a.download="dasshoku_".concat(i.getFullYear()).concat(i.getMonth()).concat(i.getDate(),"_").concat(i.getHours()).concat(i.getMinutes()).concat(i.getSeconds(),".png"),a.click(),URL.revokeObjectURL(e)}))}},computed:{origCtx:function(){var t=this.origCanvas;return t.getContext("2d")},origCanvas:function(){return document.getElementById("orig-image-canvas")},dasshokuCtx:function(){var t=this.dasshokuCanvas;return t.getContext("2d")},dasshokuCanvas:function(){return document.getElementById("dasshoku-image-canvas")}}},C=A,y=(a("38b6"),a("2877")),b=Object(y["a"])(C,r,o,!1,null,null,null),x=b.exports,k={name:"App",components:{Main:x}},L=k,_=(a("7faf"),Object(y["a"])(L,n,s,!1,null,null,null)),I=_.exports;i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(I)}}).$mount("#app")},"724e":function(t,e,a){t.exports=a.p+"img/test.1e1d555d.jpg"},"7faf":function(t,e,a){"use strict";var i=a("b8ff"),n=a.n(i);n.a},b8ff:function(t,e,a){},e146:function(t,e){t.exports="data:image/png;base64,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"}});
//# sourceMappingURL=app.37e7eb33.js.map